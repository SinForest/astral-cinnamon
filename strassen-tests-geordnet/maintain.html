<!DOCTYPE html>
<html>
	<head>
		<!--ThisIsAComment-->
		<title>Canvas-Test</title>
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script>
function catchFromTxt(input)
{
	var vectors = new Array();
	$("#container").load(input, function(msg){
						//var msg = document.getElementById("container").innerHTML;
        // den inhalt/rückgabewert nach zeilenumbrüchen aufteilen
        // und in ein array ablegen
						//document.getElementById("test").innerHTML = msg;
        var tmpArray = msg.split("\n");
        // array durchlaufen
        for(var i=0;i<tmpArray.length;i++)
        {
        	vectors[i] = new Array();
        	var tmpCoords = tmpArray[i].split(",");
        	for (var j=0;j<tmpCoords.length;j++)
					{
        		vectors[i][j] = tmpCoords[j].split(" ");
        	}            
        }
	});
	return vectors;
}

function draw(map, vectors)
{
			var canW = 1280
			var canH = 1024
			var c = document.getElementById(map);
			var ctx = c.getContext("2d");
			ctx.fillStyle = "#1F1F1F"; //Dunkelgrau füllen;
			ctx.strokeStyle = "#0040FF"; //Straßen sind blau;
			ctx.fillRect(0,0,canW,canH); //Füllen vom Canvas;
			var Xmax = rightDownLongitude - leftUpperLongitude;					
			var Ymax = rightDownLatitude - leftUpperLatitude;
				// Die Breite/Höhe der Map wird berechnet;
			for (var stra=0; stra < vectors.length; stra++)
			{
				vectors[stra][0][0] -= leftUpperLongitude;
				vectors[stra][0][1] -= leftUpperLatitude;
					// Jeder Vektor wird relativ zur oberen, linken Ecke angegeben;
				vectors[stra][0][0] /= (Xmax/canW);
				vectors[stra][0][1] /= (Ymax/canH);
					//Die relative Position des Vektors im Canvas wird berechnet;
				ctx.moveTo( Math.round(vectors[stra][0][0]) , Math.round(vectors[stra][0][1]) );
				//Der "drawer" setzt am ersten Punkt der Straße Nr. 'stra' an;
				for (var vec=1; vec < vectors[stra].length; vec++)
				{
					vectors[stra][vec][0] -= leftUpperLongitude;
					vectors[stra][vec][1] -= leftUpperLatitude;
						// Jeder Vektor wird relativ zur oberen, linken Ecke angegeben;
					vectors[stra][vec][0] /= (Xmax/canW);
					vectors[stra][vec][1] /= (Ymax/canH);
						//Die relative Position des Vektors im Canvas wird berechnet;
					ctx.lineTo( Math.round(vectors[stra][vec][0]) , Math.round(vectors[stra][vec][1]) );
						//Der "drawer" bewegt sich zum nächsten Punkt der Straße;
				}
			}
			ctx.stroke();
}
			var leftUpperLongitude = 8.659085; //Laengengrad X
			var leftUpperLatitude = 49.434311; //Breitengrad Y
			var rightDownLatitude = 49.390474; //Breitengrad Y
			var rightDownLongitude = 8.712819; //Laengengrad X
			$(document).ready(function()
			{
				var vec;
				vec = catchFromTxt("inputs.txt");
				alert(vec[2][2][1]);
				draw("map", vec);
			});
		</script>
	</head>
	<body>
		<canvas id="map" width="1280" height="1024" style="border:3px solid #ABBAFF;">This ain't supported by your browser.</canvas>
		<div id="list"></div>
		<div id="container"></div>
	</body>
</html>